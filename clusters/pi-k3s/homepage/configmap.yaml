apiVersion: v1
kind: ConfigMap
metadata:
  name: homepage-config
  namespace: homepage
data:
  settings.yaml: |
    title: Pi-K3s Home Lab
    description: Raspberry Pi Kubernetes Cluster
    theme: dark
    color: slate
    headerStyle: clean
    layout:
      Infrastructure:
        style: row
        columns: 3
      Monitoring:
        style: row
        columns: 3
      Web:
        style: row
        columns: 3
      Network:
        style: row
        columns: 2
      Media & Storage:
        style: row
        columns: 2

  services.yaml: |
    - Infrastructure:
        - Pi-hole:
            icon: pi-hole.png
            href: https://pihole.lab.mtgibbs.dev
            description: DNS & Ad Blocking
            widget:
              type: pihole
              url: http://pihole-web.pihole.svc.cluster.local
              version: 6
              key: "{{HOMEPAGE_VAR_PIHOLE_API_KEY}}"
              fields: ["queries", "blocked", "blocked_percent", "gravity"]
        - Unbound:
            icon: mdi-dns
            description: Recursive DNS Resolver
        - K3s Cluster:
            icon: kubernetes.png
            description: 3-Node ARM64 Cluster

    - Monitoring:
        - Grafana:
            icon: grafana.png
            href: https://grafana.lab.mtgibbs.dev
            description: Dashboards & Visualization
            siteMonitor: https://grafana.lab.mtgibbs.dev
        - Uptime Kuma:
            icon: uptime-kuma.png
            href: https://status.lab.mtgibbs.dev
            description: Status Page
            widget:
              type: uptimekuma
              url: http://uptime-kuma.uptime-kuma.svc.cluster.local:3001
              slug: home
        - Prometheus:
            icon: prometheus.png
            href: http://kube-prometheus-kube-prome-prometheus.monitoring.svc.cluster.local:9090
            description: Metrics Collection
            widget:
              type: prometheus
              url: http://kube-prometheus-kube-prome-prometheus.monitoring.svc.cluster.local:9090
              fields: ["targets_up", "targets_down", "targets_total"]

    - Web:
        - Personal Site (Cluster):
            icon: mdi-web
            href: https://site.lab.mtgibbs.dev
            description: Next.js on Pi K3s
            siteMonitor: https://site.lab.mtgibbs.dev
        - Personal Site (Heroku):
            icon: mdi-cloud
            href: https://mtgibbs.xyz
            description: Production on Heroku
            siteMonitor: https://mtgibbs.xyz
        - Cloudflare:
            icon: cloudflare.png
            href: https://dash.cloudflare.com
            description: DNS & CDN for mtgibbs.dev

    - Network:
        - Unifi Controller:
            icon: unifi.png
            href: https://unifi.lab.mtgibbs.dev
            description: Network Management
            widget:
              type: unifi
              url: https://192.168.1.30:8443
              username: "{{HOMEPAGE_VAR_UNIFI_USER}}"
              password: "{{HOMEPAGE_VAR_UNIFI_PASS}}"
              fields: ["wlan_users", "lan_devices", "wan"]

    - Media & Storage:
        - Synology NAS:
            icon: synology.png
            href: https://nas.lab.mtgibbs.dev
            description: 3TB Redundant Storage
            siteMonitor: https://nas.lab.mtgibbs.dev
        - Jellyfin:
            icon: jellyfin.png
            href: https://jellyfin.lab.mtgibbs.dev
            description: Media Server
            widget:
              type: jellyfin
              url: http://jellyfin.jellyfin.svc.cluster.local:8096
              key: "{{HOMEPAGE_VAR_JELLYFIN_API_KEY}}"
              enableBlocks: true
              enableNowPlaying: true
        - Immich:
            icon: immich.png
            href: https://immich.lab.mtgibbs.dev
            description: Photo & Video Backup
            widget:
              type: immich
              url: http://immich-server.immich.svc.cluster.local:2283
              key: "{{HOMEPAGE_VAR_IMMICH_API_KEY}}"
              version: 2
              fields: ["photos", "videos", "storage"]

  widgets.yaml: |
    - search:
        provider: google
        target: _blank

    - kubernetes:
        cluster:
          show: true
          cpu: true
          memory: true
          showLabel: true
          label: "Pi Cluster"
        nodes:
          show: true
          cpu: true
          memory: true
          showLabel: true

    - openmeteo:
        label: Home
        latitude: 40.7128
        longitude: -74.0060
        timezone: America/New_York
        units: imperial
        cache: 5

    - datetime:
        text_size: xl
        format:
          dateStyle: long
          timeStyle: short

  bookmarks.yaml: |
    - Developer:
        - GitHub:
            - icon: github.png
              href: https://github.com/mtgibbs/pi-cluster
        - Flux CD:
            - icon: flux-cd.png
              href: https://fluxcd.io/docs/

  docker.yaml: |
    # Docker integration disabled - using Kubernetes

  kubernetes.yaml: |
    mode: cluster
